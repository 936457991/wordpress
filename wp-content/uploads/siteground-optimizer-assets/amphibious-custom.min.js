/*!
 * Custom v1.0
 * Contains handlers for the different site functions
 *
 * Copyright (c) 2019 TemplatePocket.com
 * License: GNU General Public License v2 or later
 * http://www.gnu.org/licenses/gpl-2.0.html
 */(function(a){var b={responsiveMenuBuild:function(){var b=a('.site-header-menu-wrapper');a('.site-header-menu .page_item_has_children > a, .site-header-menu .menu-item-has-children > a').append('<button class="dropdown-toggle" aria-expanded="false"/>'),a('.site-header-menu .dropdown-toggle').off('click').on('click',function(b){b.preventDefault(),a(this).toggleClass('toggle-on'),a(this).parent().next('.children, .sub-menu').toggleClass('toggle-on'),a(this).attr('aria-expanded',a(this).attr('aria-expanded')==='false'?'true':'false')}),b.prepend('<div class="site-header-menu-responsive-close-wrapper"><button class="site-header-menu-responsive-close">&times;</button></div>')},responsiveMenuDestroy:function(){var b=a('.site-header-menu-wrapper');b.find('.dropdown-toggle').remove(),b.find('.site-header-menu-responsive-close-wrapper').remove()},sfMenuBuild:function(){a('ul.sf-menu').superfish({delay:1500,animation:{opacity:'show',height:'show'},speed:'fast',autoArrows:!1,cssArrows:!0})},sfMenuDestroy:function(){a('ul.sf-menu').superfish('destroy')},bigScreenMatch:function(){var d=a('.site-header-menu-wrapper'),c;d.removeClass('site-header-menu-responsive-wrapper'),c=a('.site-header-menu'),c.removeClass('site-header-menu-responsive'),c.addClass('sf-menu'),b.sfMenuBuild()},bigScreenUnMatch:function(){var c,d;b.sfMenuDestroy(),c=a('.site-header-menu'),c.addClass('site-header-menu-responsive'),c.removeClass('sf-menu'),d=a('.site-header-menu-wrapper'),d.addClass('site-header-menu-responsive-wrapper')},smallScreenMatch:function(){b.responsiveMenuBuild(),b.slidePanelInit(),a('.entry-content, .sidebar').find('table').wrap('<div class="table-responsive"></div>')},smallScreenUnMatch:function(){b.responsiveMenuDestroy(),b.slidePanelCloseInit(),a('.entry-content, .sidebar').find('table').unwrap('<div class="table-responsive"></div>')},slidePanelInit:function(){var d=a('.site-header-menu-wrapper'),c=a('.overlay-effect'),e=a('.site-header-menu-responsive-close');a('.toggle-menu-control').off('click').on('click',function(e){e.preventDefault(),e.stopPropagation(),d.toggleClass('show'),c.toggleClass('open'),c.hasClass('open')&&(a('body').addClass('has-responsive-menu'),b.responsiveMenuFocus(),setTimeout(function(){a('.site-header-menu-responsive-close').focus()},300))}),e.off('click').on('click',function(a){a.preventDefault(),a.stopPropagation(),b.slidePanelCloseInit()}),c.off('click').on('click',function(){b.slidePanelCloseInit()})},slidePanelCloseInit:function(){var b=a('.site-header-menu-wrapper'),c=a('.overlay-effect');c.hasClass('open')&&(a('body').removeClass('has-responsive-menu'),b.hasClass('show')&&b.toggleClass('show'),c.toggleClass('open'),setTimeout(function(){a('.toggle-menu-control').focus()},300))},responsiveMenuFocus:function(){a(document).on('keydown',function(c){var b='.site-header-menu-wrapper',m=b+' > div > button',l=b+' > ul > li > a',k=b+' > ul > li > a > button',h=b+' > ul > li ul.sub-menu.toggle-on > li > a',n=b+' > ul > li ul.sub-menu.toggle-on > li > a > button',i=m+','+l+','+k+','+h+','+n,j=a(i),d=Array.prototype.slice.call(j),f=d[d.length-1],e=d[0],g=a(':focus')[0];tabKey=c.keyCode===9,shiftKey=c.shiftKey,!shiftKey&&tabKey&&f==g&&(c.preventDefault(),e.focus()),shiftKey&&tabKey&&e==g&&(c.preventDefault(),f.focus())})},responsiveVideosInit:function(){a('.entry-content, .sidebar').fitVids()},widgetLogicInit:function(){a('.widget_nav_menu > div[class^="menu-social-"] > ul > li > a').wrapInner('<span class="screen-reader-text"></span>'),a('.widget_nav_menu .menu-item-has-children > a').append('<span class="custom-menu-toggle" aria-expanded="false"></span>'),a('.widget_nav_menu .custom-menu-toggle').off('click').on('click',function(b){b.preventDefault(),a(this).toggleClass('toggle-on'),a(this).parent().next('.sub-menu').toggleClass('toggle-on'),a(this).attr('aria-expanded',a(this).attr('aria-expanded')==='false'?'true':'false')}),a('.widget_pages .page_item_has_children > a').append('<span class="page-toggle" aria-expanded="false"></span>'),a('.widget_pages .page-toggle').off('click').on('click',function(b){b.preventDefault(),a(this).toggleClass('toggle-on'),a(this).parent().next('.children').toggleClass('toggle-on'),a(this).attr('aria-expanded',a(this).attr('aria-expanded')==='false'?'true':'false')}),a('.widget_categories').find('.children').parent().addClass('category_item_has_children'),a('.widget_categories .category_item_has_children > a').append('<span class="category-toggle" aria-expanded="false"></span>'),a('.widget_categories .category-toggle').off('click').on('click',function(b){b.preventDefault(),a(this).toggleClass('toggle-on'),a(this).parent().next('.children').toggleClass('toggle-on'),a(this).attr('aria-expanded',a(this).attr('aria-expanded')==='false'?'true':'false')})},mqInit:function(){enquire.register('screen and ( min-width: 992px )',{match(){b.bigScreenMatch()},unmatch(){b.bigScreenUnMatch()}}).register('screen and ( max-width: 991px )',{match(){b.smallScreenMatch()},unmatch(){b.smallScreenUnMatch()}})}};a(document).ready(function(){b.responsiveVideosInit(),b.widgetLogicInit(),b.mqInit()}),a(document).keyup(function(a){a.keyCode===27&&b.slidePanelCloseInit()})})(jQuery)