var gpPostMessage={fields:{},styleTag:{add(a){a=a.replace(/[^\w\s]/gi,'-'),(null===document.getElementById('gp-postmessage-'+a)||'undefined'==typeof document.getElementById('gp-postmessage-'+a))&&jQuery('head').append('<style id="gp-postmessage-'+a+'"></style>')},addData(a,b){a=a.replace('[','-').replace(']',''),gpPostMessage.styleTag.add(a),jQuery('#gp-postmessage-'+a).text(b)}},util:{processValue(a,b){var e=this,c=window.parent.wp.customize.get(),d=!1;return'object'==typeof b?(_.each(b,function(c,d){b[d]=e.processValue(a,c)}),b):!(a=_.defaults(a,{prefix:'',units:'',suffix:'',value_pattern:'$',pattern_replace:{},exclude:[]}),1<=a.exclude.length&&_.each(a.exclude,function(a){b==a&&(d=!0)}),d)&&(b=a.value_pattern.replace(new RegExp('\\$','g'),b),_.each(a.pattern_replace,function(a,d){_.isUndefined(c[a])||(b=b.replace(d,c[a]))}),a.prefix+b+a.units+a.suffix)},backgroundImageValue(a){return-1===a.indexOf('url(')?'url('+a+')':a}},css:{fromOutput(a,c,f){var d='',e=!1,b;try{c=JSON.parse(c)}catch(a){}if(a.js_callback&&'function'==typeof window[a.js_callback]&&(c=window[a.js_callback[0]](c,a.js_callback[1])),d=wp.hooks.applyFilters('gpPostMessageStylesOutput',d,c,a,f),''===d)switch(f){case'kirki-multicolor':case'kirki-sortable':d+=a.element+'{',_.each(c,function(e,c){if(a.choice&&c!==a.choice)return;b=gpPostMessage.util.processValue(a,e),''===b&&('background-color'===a.property?b='unset':'background-image'===a.property&&(b='none')),!1!==b&&(d+=a.property?a.property+'-'+c+':'+b+';':c+':'+b+';')}),d+='}';break;default:'kirki-image'===f&&(c=!_.isUndefined(c.url)?gpPostMessage.util.backgroundImageValue(c.url):gpPostMessage.util.backgroundImageValue(c)),_.isObject(c)?(d+=a.element+'{',_.each(c,function(f,e){var c;if(a.choice&&e!==a.choice)return;b=gpPostMessage.util.processValue(a,f),c=a.property?a.property:e,''===b&&('background-color'===c?b='unset':'background-image'===c&&(b='none')),!1!==b&&(d+=c+':'+b+';')}),d+='}'):(b=gpPostMessage.util.processValue(a,c),''===b&&('background-color'===a.property?b='unset':'background-image'===a.property&&(b='none')),!1!==b&&(d+=a.element+'{'+a.property+':'+b+';}'));break}return a.media_query&&'string'==typeof a.media_query&&!_.isEmpty(a.media_query)&&(e=a.media_query,-1===e.indexOf('@media')&&(e='@media '+e)),e?e+'{'+d+'}':d}},html:{fromOutput(a,b){if(a.js_callback&&'function'==typeof window[a.js_callback]&&(b=window[a.js_callback[0]](b,a.js_callback[1])),_.isObject(b)||_.isArray(b)){if(!a.choice)return;_.each(b,function(c,d){if(a.choice&&d!==a.choice)return;b=c})}b=gpPostMessage.util.processValue(a,b),a.attr?jQuery(a.element).attr(a.attr,b):jQuery(a.element).html(b)}},toggleClass:{fromOutput(a,b){if('undefined'==typeof a.class||'undefined'==typeof a.value)return;b===a.value&&!jQuery(a.element).hasClass(a.class)?jQuery(a.element).addClass(a.class):jQuery(a.element).removeClass(a.class)}}};jQuery(document).ready(function(){var a;_.each(gpPostMessageFields,function(b){wp.customize(b.settings,function(c){c.bind(function(c){a='',_.each(b.js_vars,function(d){d.function=!d.function||'undefined'==typeof gpPostMessage[d.function]?'css':d.function,b.type=b.choices&&b.choices.parent_type?b.choices.parent_type:b.type,'css'===d.function?a+=gpPostMessage.css.fromOutput(d,c,b.type):gpPostMessage[d.function].fromOutput(d,c,b.type)}),gpPostMessage.styleTag.addData(b.settings,a)})})})})