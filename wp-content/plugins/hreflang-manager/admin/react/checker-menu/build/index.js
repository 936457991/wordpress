(()=>{"use strict";const e=window.React,t=wp.element.useMemo,a="...",n=(e,t)=>{let a=t-e+1;return Array.from({length:a},((t,a)=>a+e))};var r;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}var s,c=function(t){return e.createElement("svg",l({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r||(r=e.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}var o,u=function(t){return e.createElement("svg",i({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s||(s=e.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}var d,g=function(t){return e.createElement("svg",m({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),o||(o=e.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h.apply(this,arguments)}var E=function(t){return e.createElement("svg",h({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),d||(d=e.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const p=r=>{const{onPageChange:l,totalCount:s,siblingCount:i=1,currentPage:o,pageSize:m}=r,d=(({totalCount:e,pageSize:r,siblingCount:l=1,currentPage:s})=>t((()=>{const t=Math.ceil(e/r);if(l+5>=t)return n(1,t);const c=Math.max(s-l,1),i=Math.min(s+l,t),o=c>2,u=i<t-2,m=t;if(!o&&u)return[...n(1,3+2*l),a,t];if(o&&!u){let e=n(t-(3+2*l)+1,t);return[1,a,...e]}if(o&&u){let e=n(c,i);return[1,a,...e,a,m]}}),[e,r,l,s]))({currentPage:o,totalCount:s,siblingCount:i,pageSize:m});if(0===o||d.length<2)return null;let h=d[d.length-1];return(0,e.createElement)("ul",{className:"pagination-container"},(0,e.createElement)("li",{className:"pagination-item "+(1===o?"disabled":""),onClick:()=>{l(1)},key:-2},(0,e.createElement)(c,null)),(0,e.createElement)("li",{className:"pagination-item "+(1===o?"disabled":""),onClick:()=>{1!==o&&l(o-1)},key:-1},(0,e.createElement)(u,null)),d.map((t=>t===a?(0,e.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"â€¦"):(0,e.createElement)("li",{key:t,className:"pagination-item "+(t===o?"selected":""),onClick:()=>l(t)},t))),(0,e.createElement)("li",{className:"pagination-item "+(o===h?"disabled":""),onClick:()=>{o!==h&&l(o+1)},key:h+1},(0,e.createElement)(g,null)),(0,e.createElement)("li",{className:"pagination-item "+(o===h?"disabled":""),onClick:()=>{l(h)},key:h+2},(0,e.createElement)(E,null)))},_=wp.element.useState,v=wp.element.useMemo,{__}=wp.i18n,b=t=>{const[a,n]=_(1),r=v((()=>{const e=10*(a-1),n=e+10;return t.data.slice(e,n)}),[a,t.data]);function l(e){return t.formData.sortingColumn===e?t.formData.sortingOrder:""}return(0,e.createElement)("div",{className:"dahm-data-table-container"},(0,e.createElement)("table",{className:"dahm-react-table__dahm-data-table dahm-react-table__dahm-data-table-checker-menu"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"dahm-react-table__dahm-sorting-button",onClick:t.handleSortingChanges,value:"url_to_connect","data-icon":l("url_to_connect")},__("URL to Connect","hreflang-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"dahm-react-table__dahm-sorting-button",onClick:t.handleSortingChanges,value:"issue_type","data-icon":l("issue_type")},__("Issue","hreflang-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"dahm-react-table__dahm-sorting-button",onClick:t.handleSortingChanges,value:"details","data-icon":l("details")},__("Details","hreflang-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"dahm-react-table__dahm-sorting-button",onClick:t.handleSortingChanges,value:"date","data-icon":l("date")},__("Date","hreflang-manager"))))),(0,e.createElement)("tbody",null,r.map((t=>(0,e.createElement)("tr",{key:t.hreflang_checker_issue_id},(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"dahm-react-table__post-cell-container"},(0,e.createElement)("a",{href:t.url_to_connect},t.url_to_connect),(0,e.createElement)("a",{href:t.url_to_connect,target:"_blank",className:"dahm-react-table__icon-link"}))),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"dahm-react-table__post-cell-container"},(0,e.createElement)("div",{"data-severity":t.severity,className:"dahm-react-table__icon-div"}),(0,e.createElement)("div",null,t.issue_type))),(0,e.createElement)("td",null,(0,e.createElement)("div",null,t.alternate_url.length>0?__("Alternate URL:","hreflang-manager")+" "+t.alternate_url:""),(0,e.createElement)("div",null,t.details)),(0,e.createElement)("td",null,t.formatted_date)))))),0===t.data.length&&(0,e.createElement)("div",{className:"dahm-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","hreflang-manager")),t.data.length>0&&(0,e.createElement)("div",{className:"dahm-react-table__pagination-container"},(0,e.createElement)("div",{className:"daext-displaying-num"},t.data.length+" items"),(0,e.createElement)(p,{className:"pagination-bar",currentPage:a,totalCount:t.data.length,pageSize:10,onPageChange:e=>n(e)})))},C=t=>(0,e.createElement)("div",{className:"loading-screen"},(0,e.createElement)("div",{className:"loading-screen__wrapper"},(0,e.createElement)("div",{className:"loading-screen__content"},(0,e.createElement)("div",{className:"loading-screen__spinner-container"},(0,e.createElement)("div",{className:"loading-screen__spinner"})),(0,e.createElement)("div",{className:"loading-screen__text"},void 0!==t.dataUpdateRequired&&t.dataUpdateRequired?t.generatingDataMessage:t.loadingDataMessage)))),f=wp.element.useState,k=wp.element.useEffect,{__:N}=wp.i18n,{render:y}=wp.element,{createRoot:I}=wp.element,w=document.getElementById("react-root"),D=(0,e.createElement)((()=>{const[t,a]=f({searchString:"",searchStringChanged:!1,sortingColumn:"date",sortingOrder:"desc"}),[n,r]=f(!0),[l,s]=f(!1),[c,i]=f([]),[o,u]=f({allPosts:0,SuccessfulResponses:0,totalUrlCounter:0,queueUrlCount:0,queueUrlCountChecked:0,queueAlternateUrlCount:0,queueAlternateUrlCountChecked:0});return k((()=>{r(!0),wp.apiFetch({path:"/daext-hreflang-manager/v1/hreflang-checker-issues",method:"POST",data:{search_string:t.searchString,sorting_column:t.sortingColumn,sorting_order:t.sortingOrder,data_update_required:l}}).then((e=>{i(e.table),u({allPosts:e.hreflang_checker_issues.all_issues,totalUrlCounter:e.hreflang_checker_issues.total_url_counter,queueUrlCount:e.hreflang_checker_issues.queue_url_count,queueUrlCountChecked:e.hreflang_checker_issues.queue_url_count_checked,queueAlternateUrlCount:e.hreflang_checker_issues.queue_alternate_url_count,queueAlternateUrlCountChecked:e.hreflang_checker_issues.queue_alternate_url_count_checked}),l&&(s(!1),a({searchString:"",searchStringChanged:!1,sortingColumn:"date",sortingOrder:"desc"})),r(!1)}))}),[t.searchStringChanged,t.sortingColumn,t.sortingOrder,l]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(React.StrictMode,null,n?(0,e.createElement)(C,{loadingDataMessage:N("Loading data...","hreflang-manager"),generatingDataMessage:N("Data is being generated. For large sites, this process may take several minutes. Please wait...","hreflang-manager"),dataUpdateRequired:l}):(0,e.createElement)("div",{className:"dahm-react-table"},(0,e.createElement)("div",{className:"dahm-react-table-header"},(0,e.createElement)("div",{className:"statistics"},(0,e.createElement)("div",{className:"statistic-label"},N("All issues","hreflang-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},o.allPosts),(0,e.createElement)("div",{className:"statistic-label"},"Status:"),(0,e.createElement)("div",{className:"statistic-value"},parseInt(o.queueUrlCount,10)===parseInt(o.queueUrlCountChecked,10)?"Completed":"In progress ("+parseInt(o.queueUrlCountChecked,10)+" URLs checked, "+parseInt(o.queueUrlCount,10)+" discovered)")),(0,e.createElement)("div",{className:"tools-actions"},(0,e.createElement)("button",{onClick:e=>{s((e=>!e))}},(0,e.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyIDEwQzIyIDEwIDE5Ljk5NSA3LjI2ODIyIDE4LjM2NjIgNS42MzgyNEMxNi43MzczIDQuMDA4MjcgMTQuNDg2NCAzIDEyIDNDNy4wMjk0NCAzIDMgNy4wMjk0NCAzIDEyQzMgMTYuOTcwNiA3LjAyOTQ0IDIxIDEyIDIxQzE2LjEwMzEgMjEgMTkuNTY0OSAxOC4yNTQzIDIwLjY0ODIgMTQuNU0yMiAxMFY0TTIyIDEwSDE2IiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:"button-icon"}),N("Check Hreflang","hreflang-manager")))),(0,e.createElement)("div",{className:"dahm-react-table__dahm-filters"},(0,e.createElement)("div",{className:"dahm-search-container"},(0,e.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("dahm-search-button").click())},type:"text",placeholder:N("Search URLs, issues, or details","hreflang-manager"),value:t.searchString,onChange:e=>a({...t,searchString:e.target.value})}),(0,e.createElement)("input",{id:"dahm-search-button",className:"dahm-btn dahm-btn-secondary",type:"submit",value:N("Search","hreflang-manager"),onClick:()=>a({...t,searchStringChanged:!t.searchStringChanged})}))),(0,e.createElement)(b,{data:c,handleSortingChanges:function(e){let n=t.sortingOrder;t.sortingColumn===e.target.value&&(n="asc"===t.sortingOrder?"desc":"asc"),a({...t,sortingColumn:e.target.value,sortingOrder:n})},formData:t}))))}),null);w&&(I?I(w).render(D):y(D,w))})();